<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>reactor-c: core/clock.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">reactor-c
   </div>
   <div id="projectbrief">C Runtime for Lingua Franca</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(1); });
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('dc/d54/clock_8c.html','../../'); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">clock.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Implementations of functions in <a class="el" href="../../d7/d6e/clock_8h.html" title="A higher level API to the clock utilities provided by the platform API.">clock.h</a>.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="../../d7/d6e/clock_8h_source.html">clock.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../da/dfb/low__level__platform_8h_source.html">low_level_platform.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a6b3edec4d337711a2e914c9f5581ce1c" id="r_a6b3edec4d337711a2e914c9f5581ce1c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6b3edec4d337711a2e914c9f5581ce1c">clock_sync_add_offset</a> (<a class="el" href="../../d2/dcd/tag_8h.html#a827080fd3c574bad5a32db9f7c367587">instant_t</a> *t)</td></tr>
<tr class="memdesc:a6b3edec4d337711a2e914c9f5581ce1c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add the current clock synchronization offset to a specified timestamp.  <br /></td></tr>
<tr class="separator:a6b3edec4d337711a2e914c9f5581ce1c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5fb44eb0db80b9dfa61399bdab8b85c" id="r_af5fb44eb0db80b9dfa61399bdab8b85c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af5fb44eb0db80b9dfa61399bdab8b85c">clock_sync_subtract_offset</a> (<a class="el" href="../../d2/dcd/tag_8h.html#a827080fd3c574bad5a32db9f7c367587">instant_t</a> *t)</td></tr>
<tr class="memdesc:af5fb44eb0db80b9dfa61399bdab8b85c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Subtract the clock synchronization offset from a timestamp.  <br /></td></tr>
<tr class="separator:af5fb44eb0db80b9dfa61399bdab8b85c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad3e8b04cd7bf1132b774940602a72d3" id="r_aad3e8b04cd7bf1132b774940602a72d3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aad3e8b04cd7bf1132b774940602a72d3">lf_clock_gettime</a> (<a class="el" href="../../d2/dcd/tag_8h.html#a827080fd3c574bad5a32db9f7c367587">instant_t</a> *now)</td></tr>
<tr class="separator:aad3e8b04cd7bf1132b774940602a72d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a341e2d260240fd35d29ada9531aa9ead" id="r_a341e2d260240fd35d29ada9531aa9ead"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a341e2d260240fd35d29ada9531aa9ead">lf_clock_interruptable_sleep_until_locked</a> (<a class="el" href="../../d2/d01/structenvironment__t.html">environment_t</a> *env, <a class="el" href="../../d2/dcd/tag_8h.html#a827080fd3c574bad5a32db9f7c367587">instant_t</a> wakeup_time)</td></tr>
<tr class="separator:a341e2d260240fd35d29ada9531aa9ead"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d6ed42d060c926d05db76544172fed8" id="r_a1d6ed42d060c926d05db76544172fed8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1d6ed42d060c926d05db76544172fed8">lf_clock_cond_timedwait</a> (<a class="el" href="../../dd/d67/structlf__cond__t.html">lf_cond_t</a> *cond, <a class="el" href="../../d2/dcd/tag_8h.html#a827080fd3c574bad5a32db9f7c367587">instant_t</a> wakeup_time)</td></tr>
<tr class="separator:a1d6ed42d060c926d05db76544172fed8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Implementations of functions in <a class="el" href="../../d7/d6e/clock_8h.html" title="A higher level API to the clock utilities provided by the platform API.">clock.h</a>. </p>
<dl class="section author"><dt>Author</dt><dd>Erling Jellum </dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>(c) 2020-2024, The University of California at Berkeley. License: <a href="https://github.com/lf-lang/reactor-c/blob/main/LICENSE.md">BSD 2-clause</a> </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a6b3edec4d337711a2e914c9f5581ce1c" name="a6b3edec4d337711a2e914c9f5581ce1c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b3edec4d337711a2e914c9f5581ce1c">&#9670;&#160;</a></span>clock_sync_add_offset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void clock_sync_add_offset </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/dcd/tag_8h.html#a827080fd3c574bad5a32db9f7c367587">instant_t</a> *</td>          <td class="paramname"><span class="paramname"><em>t</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add the current clock synchronization offset to a specified timestamp. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">t</td><td>Pointer to the timestamp to which to add the offset. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af5fb44eb0db80b9dfa61399bdab8b85c" name="af5fb44eb0db80b9dfa61399bdab8b85c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5fb44eb0db80b9dfa61399bdab8b85c">&#9670;&#160;</a></span>clock_sync_subtract_offset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void clock_sync_subtract_offset </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/dcd/tag_8h.html#a827080fd3c574bad5a32db9f7c367587">instant_t</a> *</td>          <td class="paramname"><span class="paramname"><em>t</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Subtract the clock synchronization offset from a timestamp. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">t</td><td>The timestamp from which to subtract the current clock sync offset. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a1d6ed42d060c926d05db76544172fed8" name="a1d6ed42d060c926d05db76544172fed8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d6ed42d060c926d05db76544172fed8">&#9670;&#160;</a></span>lf_clock_cond_timedwait()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lf_clock_cond_timedwait </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d67/structlf__cond__t.html">lf_cond_t</a> *</td>          <td class="paramname"><span class="paramname"><em>cond</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/dcd/tag_8h.html#a827080fd3c574bad5a32db9f7c367587">instant_t</a></td>          <td class="paramname"><span class="paramname"><em>wakeup_time</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Block the calling thread on the condition variable until it is signaled or until wakeup_time is reached. Before calling the appropriate function in the platform API, the wakeup_time will be translated into the correct timescale by removing any clock synchronization offset.</p>
<dl class="section return"><dt>Returns</dt><dd>0 on success, LF_TIMEOUT on timeout, platform-specific error otherwise. </dd></dl>

</div>
</div>
<a id="aad3e8b04cd7bf1132b774940602a72d3" name="aad3e8b04cd7bf1132b774940602a72d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad3e8b04cd7bf1132b774940602a72d3">&#9670;&#160;</a></span>lf_clock_gettime()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lf_clock_gettime </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/dcd/tag_8h.html#a827080fd3c574bad5a32db9f7c367587">instant_t</a> *</td>          <td class="paramname"><span class="paramname"><em>now</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Retrieve the current physical time from the platform API. This adds any clock synchronization offset and guarantees monotonicity. Specifically, each returned value will be at least one nanosecond larger than any previously returned time. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">now</td><td>A pointer to the location in which to store the result. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 on failure to read the platform clock. </dd></dl>

</div>
</div>
<a id="a341e2d260240fd35d29ada9531aa9ead" name="a341e2d260240fd35d29ada9531aa9ead"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a341e2d260240fd35d29ada9531aa9ead">&#9670;&#160;</a></span>lf_clock_interruptable_sleep_until_locked()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lf_clock_interruptable_sleep_until_locked </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d01/structenvironment__t.html">environment_t</a> *</td>          <td class="paramname"><span class="paramname"><em>env</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/dcd/tag_8h.html#a827080fd3c574bad5a32db9f7c367587">instant_t</a></td>          <td class="paramname"><span class="paramname"><em>wakeup_time</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Block the calling thread until wakeup_time is reached or the thread is interrupted by an asynchronous scheduling. This is used by the single-threaded runtime. Before calling the appropriate function in the platform API, the wakeup_time will be translated into the correct timescale by removing any clock synchronization offset.</p>
<dl class="section return"><dt>Returns</dt><dd>0 on success or -1 if interrupted. </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_4270bfced15e0e73154b13468c7c9ad9.html">core</a></li><li class="navelem"><a class="el" href="../../dc/d54/clock_8c.html">clock.c</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
