<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>reactor-c: /Users/runner/work/reactor-c/reactor-c/include/core/federated/clock-sync.h File Reference</title>
<link rel="icon" href="favicon.ico" type="image/x-icon" />
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">reactor-c<span id="projectnumber">&#160;1.0</span>
   </div>
   <div id="projectbrief">C Runtime for Lingua Franca</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('clock-sync_8h.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">clock-sync.h File Reference<div class="ingroups"><a class="el" href="group__Federated.html">Federated</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Utility functions for clock synchronization in federated Lingua Franca programs.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="low__level__platform_8h_source.html">low_level_platform.h</a>&quot;</code><br />
</div>
<p><a href="clock-sync_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-nested-classes" class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:lf_5Fstat_5Fll" id="r_lf_5Fstat_5Fll"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlf__stat__ll.html">lf_stat_ll</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Holds generic statistical data.  <a href="structlf__stat__ll.html#details">More...</a><br /></td></tr>
<tr class="memitem:socket_5Fstat_5Ft" id="r_socket_5Fstat_5Ft"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsocket__stat__t.html">socket_stat_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Statistics and state for clock synchronization over a socket connection.  <a href="structsocket__stat__t.html#details">More...</a><br /></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-define-members" class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga532da6f271eb75c9ac745571b995c404" id="r_ga532da6f271eb75c9ac745571b995c404"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Federated.html#ga532da6f271eb75c9ac745571b995c404">_LF_CLOCK_SYNC_ATTENUATION</a>&#160;&#160;&#160;10</td></tr>
<tr class="memdesc:ga532da6f271eb75c9ac745571b995c404"><td class="mdescLeft">&#160;</td><td class="mdescRight">Runtime clock offset updates will be divided by this number.  <br /></td></tr>
<tr class="memitem:ga4b9290ecd850995c857e04746aa45d10" id="r_ga4b9290ecd850995c857e04746aa45d10"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Federated.html#ga4b9290ecd850995c857e04746aa45d10">_LF_CLOCK_SYNC_COLLECT_STATS</a>&#160;&#160;&#160;true</td></tr>
<tr class="memdesc:ga4b9290ecd850995c857e04746aa45d10"><td class="mdescLeft">&#160;</td><td class="mdescRight">By default, collect statistics on clock synchronization.  <br /></td></tr>
<tr class="memitem:gab0eeaea19d6e5c9217a4eed928c32141" id="r_gab0eeaea19d6e5c9217a4eed928c32141"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Federated.html#gab0eeaea19d6e5c9217a4eed928c32141">_LF_CLOCK_SYNC_EXCHANGES_PER_INTERVAL</a>&#160;&#160;&#160;10</td></tr>
<tr class="memdesc:gab0eeaea19d6e5c9217a4eed928c32141"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of required clock sync T4 messages per synchronization interval.  <br /></td></tr>
<tr class="memitem:ga0810a64801750ce9b148848c228c86e9" id="r_ga0810a64801750ce9b148848c228c86e9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Federated.html#ga0810a64801750ce9b148848c228c86e9">CLOCK_SYNC_GUARD_BAND</a>&#160;&#160;&#160;<a class="el" href="group__Constants.html#gaa2aeaab0c2033d1db412c8021bff93fc">USEC</a>(100)</td></tr>
<tr class="memdesc:ga0810a64801750ce9b148848c228c86e9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Define a guard band to filter clock synchronization messages based on discrepancies in the network delay.  <br /></td></tr>
<tr class="memitem:gab36196523f89c0d8f30c1965b458beb6" id="r_gab36196523f89c0d8f30c1965b458beb6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Federated.html#gab36196523f89c0d8f30c1965b458beb6">LF_CLOCK_SYNC</a>&#160;&#160;&#160;<a class="el" href="group__Federated.html#ga7ed4e5f2a4216fdf6d76eafcab5b49b7">LF_CLOCK_SYNC_INIT</a></td></tr>
<tr class="memdesc:gab36196523f89c0d8f30c1965b458beb6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clock synchronization mode.  <br /></td></tr>
<tr class="memitem:ga7ed4e5f2a4216fdf6d76eafcab5b49b7" id="r_ga7ed4e5f2a4216fdf6d76eafcab5b49b7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Federated.html#ga7ed4e5f2a4216fdf6d76eafcab5b49b7">LF_CLOCK_SYNC_INIT</a>&#160;&#160;&#160;2</td></tr>
<tr class="memdesc:ga7ed4e5f2a4216fdf6d76eafcab5b49b7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Indicator for clock synchronization to be turned on at initialization.  <br /></td></tr>
<tr class="memitem:ga742c3183fb89d811377514d09e526b8f" id="r_ga742c3183fb89d811377514d09e526b8f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Federated.html#ga742c3183fb89d811377514d09e526b8f">LF_CLOCK_SYNC_OFF</a>&#160;&#160;&#160;1</td></tr>
<tr class="memdesc:ga742c3183fb89d811377514d09e526b8f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Indicator for clock synchronization to be turned off altogether.  <br /></td></tr>
<tr class="memitem:gaa9efe35bfc06d22220c852574c4a5feb" id="r_gaa9efe35bfc06d22220c852574c4a5feb"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Federated.html#gaa9efe35bfc06d22220c852574c4a5feb">LF_CLOCK_SYNC_ON</a>&#160;&#160;&#160;3</td></tr>
<tr class="memdesc:gaa9efe35bfc06d22220c852574c4a5feb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Indicator for clock synchronization to be turned on at initialization and runtime.  <br /></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-typedef-members" class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ga9e708b16d53622a88d5a2638affb6934" id="r_ga9e708b16d53622a88d5a2638affb6934"><td class="memItemLeft" align="right" valign="top">typedef struct lf_stat_ll&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Federated.html#ga9e708b16d53622a88d5a2638affb6934">lf_stat_ll</a></td></tr>
<tr class="memdesc:ga9e708b16d53622a88d5a2638affb6934"><td class="mdescLeft">&#160;</td><td class="mdescRight">Holds generic statistical data.  <br /></td></tr>
<tr class="memitem:ga7e49fed082ec884e26d761e1c4f0d428" id="r_ga7e49fed082ec884e26d761e1c4f0d428"><td class="memItemLeft" align="right" valign="top">typedef struct socket_stat_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Federated.html#ga7e49fed082ec884e26d761e1c4f0d428">socket_stat_t</a></td></tr>
<tr class="memdesc:ga7e49fed082ec884e26d761e1c4f0d428"><td class="mdescLeft">&#160;</td><td class="mdescRight">Statistics and state for clock synchronization over a socket connection.  <br /></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-func-members" class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga6b3edec4d337711a2e914c9f5581ce1c" id="r_ga6b3edec4d337711a2e914c9f5581ce1c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Federated.html#ga6b3edec4d337711a2e914c9f5581ce1c">clock_sync_add_offset</a> (<a class="el" href="group__API.html#ga827080fd3c574bad5a32db9f7c367587">instant_t</a> *t)</td></tr>
<tr class="memdesc:ga6b3edec4d337711a2e914c9f5581ce1c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add the current clock synchronization offset to a specified timestamp.  <br /></td></tr>
<tr class="memitem:ga4f1aaaa9e0b74867ba6b60eb962dfca6" id="r_ga4f1aaaa9e0b74867ba6b60eb962dfca6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Federated.html#ga4f1aaaa9e0b74867ba6b60eb962dfca6">clock_sync_set_constant_bias</a> (<a class="el" href="group__API.html#gaf5b4e62d03782997d813be6145316f4b">interval_t</a> offset)</td></tr>
<tr class="memdesc:ga4f1aaaa9e0b74867ba6b60eb962dfca6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set a fixed offset to the physical clock.  <br /></td></tr>
<tr class="memitem:gaf5fb44eb0db80b9dfa61399bdab8b85c" id="r_gaf5fb44eb0db80b9dfa61399bdab8b85c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Federated.html#gaf5fb44eb0db80b9dfa61399bdab8b85c">clock_sync_subtract_offset</a> (<a class="el" href="group__API.html#ga827080fd3c574bad5a32db9f7c367587">instant_t</a> *t)</td></tr>
<tr class="memdesc:gaf5fb44eb0db80b9dfa61399bdab8b85c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Subtract the clock synchronization offset from a timestamp.  <br /></td></tr>
<tr class="memitem:gac094b53ced87d3cbd617a66591f4282a" id="r_gac094b53ced87d3cbd617a66591f4282a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Federated.html#gac094b53ced87d3cbd617a66591f4282a">create_clock_sync_thread</a> (lf_thread_t *thread_id)</td></tr>
<tr class="memdesc:gac094b53ced87d3cbd617a66591f4282a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create the thread responsible for handling clock synchronization with the RTI if (runtime) clock synchronization is on.  <br /></td></tr>
<tr class="memitem:gace14df89540b56b069c6c619e8f37493" id="r_gace14df89540b56b069c6c619e8f37493"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Federated.html#gace14df89540b56b069c6c619e8f37493">handle_T1_clock_sync_message</a> (unsigned char *buffer, int socket, <a class="el" href="group__API.html#ga827080fd3c574bad5a32db9f7c367587">instant_t</a> t2)</td></tr>
<tr class="memdesc:gace14df89540b56b069c6c619e8f37493"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle a clock synchroninzation message T1 coming from the RTI.  <br /></td></tr>
<tr class="memitem:ga1b35d21eda090ea4bf8a79f401dbdad0" id="r_ga1b35d21eda090ea4bf8a79f401dbdad0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Federated.html#ga1b35d21eda090ea4bf8a79f401dbdad0">handle_T4_clock_sync_message</a> (unsigned char *buffer, int socket, <a class="el" href="group__API.html#ga827080fd3c574bad5a32db9f7c367587">instant_t</a> r4)</td></tr>
<tr class="memdesc:ga1b35d21eda090ea4bf8a79f401dbdad0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle a clock synchronization message T4 coming from the RTI.  <br /></td></tr>
<tr class="memitem:gae267d03a5f2263604459ca4c1aef2c2c" id="r_gae267d03a5f2263604459ca4c1aef2c2c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Federated.html#gae267d03a5f2263604459ca4c1aef2c2c">reset_socket_stat</a> (struct <a class="el" href="structsocket__stat__t.html">socket_stat_t</a> *socket_stat)</td></tr>
<tr class="memdesc:gae267d03a5f2263604459ca4c1aef2c2c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset statistics on the socket.  <br /></td></tr>
<tr class="memitem:ga834b31e00e677a23b6a86119b7a2fe59" id="r_ga834b31e00e677a23b6a86119b7a2fe59"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Federated.html#ga834b31e00e677a23b6a86119b7a2fe59">setup_clock_synchronization_with_rti</a> (void)</td></tr>
<tr class="memdesc:ga834b31e00e677a23b6a86119b7a2fe59"><td class="mdescLeft">&#160;</td><td class="mdescRight">Setup necessary functionalities to synchronize clock with the RTI.  <br /></td></tr>
<tr class="memitem:ga3eba5f95a19f86a70d9d11fd2c736dd1" id="r_ga3eba5f95a19f86a70d9d11fd2c736dd1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Federated.html#ga3eba5f95a19f86a70d9d11fd2c736dd1">synchronize_initial_physical_clock_with_rti</a> (int *rti_socket_TCP)</td></tr>
<tr class="memdesc:ga3eba5f95a19f86a70d9d11fd2c736dd1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Synchronize the initial physical clock with the RTI.  <br /></td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Utility functions for clock synchronization in federated Lingua Franca programs. </p>
<dl class="section author"><dt>Author</dt><dd>Edward A. Lee (<a href="mailto:eal@berkeley.edu">eal@berkeley.edu</a>) </dd>
<dd>
Soroush Bateni (<a href="mailto:soroush@utdallas.edu">soroush@utdallas.edu</a>)</dd></dl>
<p>This file provides utility functions and data structures for synchronizing physical clocks between federates and the RTI in federated Lingua Franca programs. It implements a variant of the Precision Time Protocol (PTP) for clock synchronization, with support for both initial synchronization and runtime synchronization. The file includes functions for handling clock synchronization messages, managing synchronization statistics, and adjusting clock offsets. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="dir_d522931ffa1371640980b621734a4381.html">Users</a></li><li class="navelem"><a href="dir_308bc1499b5f97ed0ba0865f54916185.html">runner</a></li><li class="navelem"><a href="dir_61c33e2faf3f402353c3e4f8a1de3ade.html">work</a></li><li class="navelem"><a href="dir_f3821db21fac557b6b84e126be960f00.html">reactor-c</a></li><li class="navelem"><a href="dir_ac1783de82f42168f79d5e66bc78eb8b.html">reactor-c</a></li><li class="navelem"><a href="dir_c9cd8ac8edbc816f956bbae22744abc5.html">include</a></li><li class="navelem"><a href="dir_26ddd9272df60b6031e319f70270bd7f.html">core</a></li><li class="navelem"><a href="dir_e0b79ab85e892bf9453f746580791e50.html">federated</a></li><li class="navelem"><a href="clock-sync_8h.html">clock-sync.h</a></li>
    <li class="footer">Generated on <span class="timestamp"></span> for reactor-c by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
