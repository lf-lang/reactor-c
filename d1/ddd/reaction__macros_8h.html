<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>reactor-c: include/api/reaction_macros.h File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">reactor-c
   </div>
   <div id="projectbrief">C Runtime for Lingua Franca</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('d1/ddd/reaction__macros_8h.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a>  </div>
  <div class="headertitle"><div class="title">reaction_macros.h File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Macros providing an API for use in inline reaction bodies.  
<a href="#details">More...</a></p>

<p><a href="../../d1/ddd/reaction__macros_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a5c1e2963a361057f0b249b95f40a8f8d" id="r_a5c1e2963a361057f0b249b95f40a8f8d"><td class="memItemLeft" align="right" valign="top">#<a class="el" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">define</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5c1e2963a361057f0b249b95f40a8f8d">lf_set_present</a>(<a class="el" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">out</a>)&#160;&#160;&#160;lf_set_present((<a class="el" href="../../da/de8/structlf__port__base__t.html">lf_port_base_t</a>*)<a class="el" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">out</a>)</td></tr>
<tr class="memdesc:a5c1e2963a361057f0b249b95f40a8f8d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mark a port present.  <br /></td></tr>
<tr class="separator:a5c1e2963a361057f0b249b95f40a8f8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef602f51d34bbd214643161e425d909d" id="r_aef602f51d34bbd214643161e425d909d"><td class="memItemLeft" align="right" valign="top">#<a class="el" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">define</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aef602f51d34bbd214643161e425d909d">lf_set</a>(<a class="el" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">out</a>,  <a class="el" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">val</a>)</td></tr>
<tr class="memdesc:aef602f51d34bbd214643161e425d909d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the specified output (or input of a contained reactor) to the specified value.  <br /></td></tr>
<tr class="separator:aef602f51d34bbd214643161e425d909d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a3a63e70ec63e35d46573293ecec905" id="r_a8a3a63e70ec63e35d46573293ecec905"><td class="memItemLeft" align="right" valign="top">#<a class="el" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">define</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8a3a63e70ec63e35d46573293ecec905">lf_set_array</a>(<a class="el" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">out</a>,  <a class="el" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">val</a>,  <a class="el" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">len</a>)</td></tr>
<tr class="memdesc:a8a3a63e70ec63e35d46573293ecec905"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the specified output (or input of a contained reactor) to the specified array with the given length.  <br /></td></tr>
<tr class="separator:a8a3a63e70ec63e35d46573293ecec905"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1aa76760517d7100306d59b92fd41a26" id="r_a1aa76760517d7100306d59b92fd41a26"><td class="memItemLeft" align="right" valign="top">#<a class="el" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">define</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1aa76760517d7100306d59b92fd41a26">lf_set_token</a>(<a class="el" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">out</a>,  <a class="el" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">newtoken</a>)</td></tr>
<tr class="memdesc:a1aa76760517d7100306d59b92fd41a26"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the specified output (or input of a contained reactor) to the specified token value.  <br /></td></tr>
<tr class="separator:a1aa76760517d7100306d59b92fd41a26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4b2874af3da2bb85edfb3f0a57028a1" id="r_af4b2874af3da2bb85edfb3f0a57028a1"><td class="memItemLeft" align="right" valign="top">#<a class="el" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">define</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af4b2874af3da2bb85edfb3f0a57028a1">lf_set_destructor</a>(<a class="el" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">out</a>,  <a class="el" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">dtor</a>)&#160;&#160;&#160;((<a class="el" href="../../db/d12/structtoken__type__t.html">token_type_t</a>*)<a class="el" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">out</a>)-&gt;destructor = <a class="el" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">dtor</a></td></tr>
<tr class="memdesc:af4b2874af3da2bb85edfb3f0a57028a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the destructor associated with the specified port.  <br /></td></tr>
<tr class="separator:af4b2874af3da2bb85edfb3f0a57028a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa515ab9df816c6ac8a450def4dc02f40" id="r_aa515ab9df816c6ac8a450def4dc02f40"><td class="memItemLeft" align="right" valign="top">#<a class="el" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">define</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa515ab9df816c6ac8a450def4dc02f40">lf_set_copy_constructor</a>(<a class="el" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">out</a>,  <a class="el" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">cpy_ctor</a>)&#160;&#160;&#160;((<a class="el" href="../../db/d12/structtoken__type__t.html">token_type_t</a>*)<a class="el" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">out</a>)-&gt;copy_constructor = <a class="el" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">cpy_ctor</a></td></tr>
<tr class="memdesc:aa515ab9df816c6ac8a450def4dc02f40"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the copy constructor associated with the specified port.  <br /></td></tr>
<tr class="separator:aa515ab9df816c6ac8a450def4dc02f40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d81456725407157f9dc521a5e14a679" id="r_a2d81456725407157f9dc521a5e14a679"><td class="memItemLeft" align="right" valign="top">#<a class="el" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">define</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2d81456725407157f9dc521a5e14a679">lf_tag</a>()&#160;&#160;&#160;lf_tag(self-&gt;base.environment)</td></tr>
<tr class="separator:a2d81456725407157f9dc521a5e14a679"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fe4453dda4223671dc90fa1ecbcac85" id="r_a4fe4453dda4223671dc90fa1ecbcac85"><td class="memItemLeft" align="right" valign="top">#<a class="el" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">define</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4fe4453dda4223671dc90fa1ecbcac85">lf_time_logical</a>()&#160;&#160;&#160;lf_time_logical(self-&gt;base.environment)</td></tr>
<tr class="separator:a4fe4453dda4223671dc90fa1ecbcac85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7aaaed76bc1ae823bb13d6603807f874" id="r_a7aaaed76bc1ae823bb13d6603807f874"><td class="memItemLeft" align="right" valign="top">#<a class="el" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">define</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7aaaed76bc1ae823bb13d6603807f874">lf_time_logical_elapsed</a>()&#160;&#160;&#160;lf_time_logical_elapsed(self-&gt;base.environment)</td></tr>
<tr class="separator:a7aaaed76bc1ae823bb13d6603807f874"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Macros providing an API for use in inline reaction bodies. </p>
<dl class="section author"><dt>Author</dt><dd>Edward A. Lee (<a href="#" onclick="location.href='mai'+'lto:'+'eal'+'@b'+'erk'+'el'+'ey.'+'ed'+'u'; return false;">eal@b<span class="obfuscator">.nosp@m.</span>erke<span class="obfuscator">.nosp@m.</span>ley.e<span class="obfuscator">.nosp@m.</span>du</a>) </dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>(c) 2020-2024, The University of California at Berkeley. License: <a href="https://github.com/lf-lang/reactor-c/blob/main/LICENSE.md">BSD 2-clause</a> </dd></dl>
<p>This set of macros is defined prior to each reaction body and undefined after the reaction body using the set_undef.h header file. If you wish to use these macros in external code, such as that implementing a bodiless reaction, then you can include this header file (and at least <a class="el" href="../../dc/d85/reactor_8h.html" title="Definitions for the C target of Lingua Franca shared by threaded and unthreaded versions.">reactor.h</a>, plus possibly a few other header files) in your code.</p>
<p>The purpose for these macros is to provide a semblance of polymorphism even though C does not support polymorphism. For example, <code><a class="el" href="#aef602f51d34bbd214643161e425d909d" title="Set the specified output (or input of a contained reactor) to the specified value.">lf_set(port, value)</a></code> is a macro where the first argument is a specific port struct and the second type is a value with a type corresponding to the port's type. It is not possible in C to provide a function that can be called with a port struct and a value of any type.</p>
<p>Some of the macros are provided for convenience. For example, the macro can automatically provide common arguments such as the environment and can cast arguments to required base types to suppress warning.</p>
<p>Note for target language developers. This is one way of developing a target language where the C core runtime is adopted. This file is a translation layer that implements Lingua Franca APIs which interact with the internal APIs. </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="aef602f51d34bbd214643161e425d909d" name="aef602f51d34bbd214643161e425d909d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef602f51d34bbd214643161e425d909d">&#9670;&#160;</a></span>lf_set</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#<a class="el" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">define</a> lf_set</td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><a class="el" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">out</a>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><a class="el" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">val</a></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordflow">do</span> { \</div>
<div class="line">    <a class="code hl_variable" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">out</a>-&gt;value = <a class="code hl_variable" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">val</a>; <a class="code hl_variable" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">\</a></div>
<div class="line"><a class="code hl_variable" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">    lf_set_present</a>(<a class="code hl_variable" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">out</a>); <a class="code hl_variable" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">\</a></div>
<div class="line"><a class="code hl_variable" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">    if</a> (((<a class="code hl_struct" href="../../de/d6b/structtoken__template__t.html">token_template_t</a>*)<a class="code hl_variable" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">out</a>)-&gt;token != <a class="code hl_variable" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">NULL</a>) { \</div>
<div class="line">        <span class="comment">/* The cast &quot;*((void**) &amp;out-&gt;value)&quot; is a hack to make the code */</span> \</div>
<div class="line">        <span class="comment">/* compile with non-token types where value is not a pointer. */</span> \</div>
<div class="line">        <a class="code hl_struct" href="../../d6/d80/structlf__token__t.html">lf_token_t</a>* token = <a class="code hl_function" href="../../d4/d37/lf__token_8c.html#ac171b72d59f37653f012d30cad72a2d2">_lf_initialize_token_with_value</a>((<a class="code hl_struct" href="../../de/d6b/structtoken__template__t.html">token_template_t</a>*)<a class="code hl_variable" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">out</a>, *((<span class="keywordtype">void</span>**) &amp;<a class="code hl_variable" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">out</a>-&gt;value), 1); \</div>
<div class="line">    } \</div>
<div class="line">} <span class="keywordflow">while</span>(0)</div>
<div class="ttc" id="ahashmap_8h_html_ad2c17ed7e0d4d65a63bf9002aba2016f"><div class="ttname"><a href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">address</a></div><div class="ttdeci">return address</div><div class="ttdef"><b>Definition</b> hashmap.h:74</div></div>
<div class="ttc" id="alf__token_8c_html_ac171b72d59f37653f012d30cad72a2d2"><div class="ttname"><a href="../../d4/d37/lf__token_8c.html#ac171b72d59f37653f012d30cad72a2d2">_lf_initialize_token_with_value</a></div><div class="ttdeci">lf_token_t * _lf_initialize_token_with_value(token_template_t *tmplt, void *value, size_t length)</div><div class="ttdef"><b>Definition</b> lf_token.c:291</div></div>
<div class="ttc" id="astructlf__token__t_html"><div class="ttname"><a href="../../d6/d80/structlf__token__t.html">lf_token_t</a></div><div class="ttdef"><b>Definition</b> lf_token.h:94</div></div>
<div class="ttc" id="astructtoken__template__t_html"><div class="ttname"><a href="../../de/d6b/structtoken__template__t.html">token_template_t</a></div><div class="ttdoc">Base type for ports (lf_port_base_t) and actions (trigger_t), which can carry tokens....</div><div class="ttdef"><b>Definition</b> lf_token.h:121</div></div>
</div><!-- fragment -->
<p>Set the specified output (or input of a contained reactor) to the specified value. </p>
<p>If the value argument is a primitive type such as int, double, etc. as well as the built-in types bool and string, the value is copied and therefore the variable carrying the value can be subsequently modified without changing the output. This also applies to structs with a type defined by a typedef so that the type designating string does not end in '*'.</p>
<p>If the value argument is a pointer to memory that the calling reaction has dynamically allocated, the memory will be automatically freed once all downstream reactions no longer need the value. If 'lf_set_destructor' is called on 'out', then that destructor will be used to free 'value'. Otherwise, the default void free(void*) function is used.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">out</td><td>The output port (by name) or input of a contained reactor in form input_name.port_name. </td></tr>
    <tr><td class="paramname">value</td><td>The value to insert into the self struct. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a8a3a63e70ec63e35d46573293ecec905" name="a8a3a63e70ec63e35d46573293ecec905"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a3a63e70ec63e35d46573293ecec905">&#9670;&#160;</a></span>lf_set_array</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#<a class="el" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">define</a> lf_set_array</td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><a class="el" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">out</a>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><a class="el" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">val</a>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><a class="el" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">len</a></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordflow">do</span> { <a class="code hl_variable" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">\</a></div>
<div class="line"><a class="code hl_variable" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">    lf_set_present</a>(<a class="code hl_variable" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">out</a>); \</div>
<div class="line">    <a class="code hl_struct" href="../../d6/d80/structlf__token__t.html">lf_token_t</a>* token = <a class="code hl_function" href="../../d4/d37/lf__token_8c.html#ac171b72d59f37653f012d30cad72a2d2">_lf_initialize_token_with_value</a>((<a class="code hl_struct" href="../../de/d6b/structtoken__template__t.html">token_template_t</a>*)<a class="code hl_variable" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">out</a>, <a class="code hl_variable" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">val</a>, <a class="code hl_variable" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">len</a>); \</div>
<div class="line">    <a class="code hl_variable" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">out</a>-&gt;value = token-&gt;<a class="code hl_variable" href="../../d6/d80/structlf__token__t.html#a96f790f8f8dcc01474dbc255e05ceaa8">value</a>; \</div>
<div class="line">    <a class="code hl_variable" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">out</a>-&gt;length = <a class="code hl_variable" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">len</a>; \</div>
<div class="line">} <span class="keywordflow">while</span>(0)</div>
<div class="ttc" id="astructlf__token__t_html_a96f790f8f8dcc01474dbc255e05ceaa8"><div class="ttname"><a href="../../d6/d80/structlf__token__t.html#a96f790f8f8dcc01474dbc255e05ceaa8">lf_token_t::value</a></div><div class="ttdeci">void * value</div><div class="ttdef"><b>Definition</b> lf_token.h:96</div></div>
</div><!-- fragment -->
<p>Set the specified output (or input of a contained reactor) to the specified array with the given length. </p>
<p>The array is assumed to be in dynamically allocated memory. The deallocation is delegated to downstream reactors, which automatically deallocate when the reference count drops to zero.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">out</td><td>The output port (by name). </td></tr>
    <tr><td class="paramname">val</td><td>The array to send (a pointer to the first element). </td></tr>
    <tr><td class="paramname">length</td><td>The length of the array to send. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa515ab9df816c6ac8a450def4dc02f40" name="aa515ab9df816c6ac8a450def4dc02f40"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa515ab9df816c6ac8a450def4dc02f40">&#9670;&#160;</a></span>lf_set_copy_constructor</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#<a class="el" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">define</a> lf_set_copy_constructor</td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><a class="el" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">out</a>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><a class="el" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">cpy_ctor</a></span>&#160;)&#160;&#160;&#160;((<a class="el" href="../../db/d12/structtoken__type__t.html">token_type_t</a>*)<a class="el" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">out</a>)-&gt;copy_constructor = <a class="el" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">cpy_ctor</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the copy constructor associated with the specified port. </p>
<p>The copy constructor will be used to copy any value sent through the specified port whenever a downstream user of the value declares a mutable input port or calls <code><a class="el" href="../../d4/d37/lf__token_8c.html#aaf8e6f18b021d0b8ece7e1b64280432f">lf_writable_copy()</a></code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">out</td><td>The output port (by name) or input of a contained reactor in form reactor.port_name. </td></tr>
    <tr><td class="paramname">dtor</td><td>A pointer to a void function that takes a pointer argument (or NULL to use the default void <code><a class="el" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">memcpy()</a></code> function. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af4b2874af3da2bb85edfb3f0a57028a1" name="af4b2874af3da2bb85edfb3f0a57028a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af4b2874af3da2bb85edfb3f0a57028a1">&#9670;&#160;</a></span>lf_set_destructor</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#<a class="el" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">define</a> lf_set_destructor</td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><a class="el" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">out</a>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><a class="el" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">dtor</a></span>&#160;)&#160;&#160;&#160;((<a class="el" href="../../db/d12/structtoken__type__t.html">token_type_t</a>*)<a class="el" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">out</a>)-&gt;destructor = <a class="el" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">dtor</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the destructor associated with the specified port. </p>
<p>The destructor will be used to free any value sent through the specified port when all downstream users of the value are finished with it.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">out</td><td>The output port (by name) or input of a contained reactor in form reactor.port_name. </td></tr>
    <tr><td class="paramname">dtor</td><td>A pointer to a void function that takes a pointer argument (or NULL to use the default void free(void*) function. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a5c1e2963a361057f0b249b95f40a8f8d" name="a5c1e2963a361057f0b249b95f40a8f8d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c1e2963a361057f0b249b95f40a8f8d">&#9670;&#160;</a></span>lf_set_present</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#<a class="el" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">define</a> lf_set_present</td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><a class="el" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">out</a></span></td><td>)</td>
          <td>&#160;&#160;&#160;lf_set_present((<a class="el" href="../../da/de8/structlf__port__base__t.html">lf_port_base_t</a>*)<a class="el" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">out</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Mark a port present. </p>
<p>This sets the is_present field of the specified output to true.</p>
<p>This macro is a thin wrapper around the <a class="el" href="#a5c1e2963a361057f0b249b95f40a8f8d" title="Mark a port present.">lf_set_present()</a> function. It simply casts the argument to <code>lf_port_base_t*</code> to suppress warnings.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">out</td><td>The output port (by name). </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a1aa76760517d7100306d59b92fd41a26" name="a1aa76760517d7100306d59b92fd41a26"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1aa76760517d7100306d59b92fd41a26">&#9670;&#160;</a></span>lf_set_token</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#<a class="el" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">define</a> lf_set_token</td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><a class="el" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">out</a>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><a class="el" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">newtoken</a></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordflow">do</span> { <a class="code hl_variable" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">\</a></div>
<div class="line"><a class="code hl_variable" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">    lf_set_present</a>(<a class="code hl_variable" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">out</a>); <a class="code hl_variable" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">\</a></div>
<div class="line"><a class="code hl_variable" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">    _lf_replace_template_token</a>((<a class="code hl_struct" href="../../de/d6b/structtoken__template__t.html">token_template_t</a>*)<a class="code hl_variable" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">out</a>, <a class="code hl_variable" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">newtoken</a>); \</div>
<div class="line">    <a class="code hl_variable" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">out</a>-&gt;value = <a class="code hl_variable" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">newtoken</a>-&gt;value; \</div>
<div class="line">    <a class="code hl_variable" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">out</a>-&gt;length = <a class="code hl_variable" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">newtoken</a>-&gt;length; \</div>
<div class="line">} <span class="keywordflow">while</span>(0)</div>
</div><!-- fragment -->
<p>Set the specified output (or input of a contained reactor) to the specified token value. </p>
<p>Tokens in the C runtime wrap messages that are in dynamically allocated memory and perform reference counting to ensure that memory is not freed prematurely.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">out</td><td>The output port (by name). </td></tr>
    <tr><td class="paramname">token</td><td>A pointer to token obtained from an input, an action, or from <code><a class="el" href="../../d4/d37/lf__token_8c.html#aa47b51a11727eec252ff7e786794bd88" title="Return a new disassociated token with type matching the specified port or action and containing the s...">lf_new_token()</a></code>. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2d81456725407157f9dc521a5e14a679" name="a2d81456725407157f9dc521a5e14a679"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d81456725407157f9dc521a5e14a679">&#9670;&#160;</a></span>lf_tag</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#<a class="el" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">define</a> lf_tag</td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td>&#160;&#160;&#160;lf_tag(self-&gt;base.environment)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return the current tag of the environment invoking this reaction. </p>

</div>
</div>
<a id="a4fe4453dda4223671dc90fa1ecbcac85" name="a4fe4453dda4223671dc90fa1ecbcac85"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fe4453dda4223671dc90fa1ecbcac85">&#9670;&#160;</a></span>lf_time_logical</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#<a class="el" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">define</a> lf_time_logical</td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td>&#160;&#160;&#160;lf_time_logical(self-&gt;base.environment)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return the current logical time in nanoseconds of the environment invoking this reaction. </p>

</div>
</div>
<a id="a7aaaed76bc1ae823bb13d6603807f874" name="a7aaaed76bc1ae823bb13d6603807f874"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7aaaed76bc1ae823bb13d6603807f874">&#9670;&#160;</a></span>lf_time_logical_elapsed</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#<a class="el" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">define</a> lf_time_logical_elapsed</td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td>&#160;&#160;&#160;lf_time_logical_elapsed(self-&gt;base.environment)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return the current logical time of the environment invoking this reaction relative to the start time in nanoseconds. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="../../dir_2d52abcd54c181b91d630da402923092.html">api</a></li><li class="navelem"><a class="el" href="../../d1/ddd/reaction__macros_8h.html">reaction_macros.h</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0 </li>
  </ul>
</div>
</body>
</html>
