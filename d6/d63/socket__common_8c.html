<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>reactor-c: core/federated/network/socket_common.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">reactor-c
   </div>
   <div id="projectbrief">C Runtime for Lingua Franca</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(1); });
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('d6/d63/socket__common_8c.html','../../'); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">socket_common.c File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;unistd.h&gt;</code><br />
<code>#include &lt;netinet/in.h&gt;</code><br />
<code>#include &lt;netinet/tcp.h&gt;</code><br />
<code>#include &lt;errno.h&gt;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;sys/time.h&gt;</code><br />
<code>#include &lt;sys/types.h&gt;</code><br />
<code>#include &lt;sys/socket.h&gt;</code><br />
<code>#include &lt;netdb.h&gt;</code><br />
<code>#include &lt;stdarg.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &quot;<a class="el" href="../../d8/d3c/util_8h_source.html">util.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../de/dbd/socket__common_8h_source.html">socket_common.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:af58c457e08491f7cfd5a0a46940e11ad" id="r_af58c457e08491f7cfd5a0a46940e11ad"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af58c457e08491f7cfd5a0a46940e11ad">NUMBER_OF_FEDERATES</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:af58c457e08491f7cfd5a0a46940e11ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a065f1f00e4a82d34116e1cd8734fabde" id="r_a065f1f00e4a82d34116e1cd8734fabde"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a065f1f00e4a82d34116e1cd8734fabde">SOCKET_READ_RETRY_INTERVAL</a>&#160;&#160;&#160;1000000</td></tr>
<tr class="separator:a065f1f00e4a82d34116e1cd8734fabde"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a10b0373c1cff0213b17cb7308949f0a2" id="r_a10b0373c1cff0213b17cb7308949f0a2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a10b0373c1cff0213b17cb7308949f0a2">create_real_time_tcp_socket_errexit</a> ()</td></tr>
<tr class="memdesc:a10b0373c1cff0213b17cb7308949f0a2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create an IPv4 TCP socket with Nagle's algorithm disabled (TCP_NODELAY) and Delayed ACKs disabled (TCP_QUICKACK). Exits application on any error.  <br /></td></tr>
<tr class="separator:a10b0373c1cff0213b17cb7308949f0a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94aaee169c4c822e4c9e6a73f59a6952" id="r_a94aaee169c4c822e4c9e6a73f59a6952"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a94aaee169c4c822e4c9e6a73f59a6952">create_server</a> (uint16_t port, int *final_socket, uint16_t *final_port, <a class="el" href="../../de/dbd/socket__common_8h.html#a54c375e3893ff5969d20df65b90c8335">socket_type_t</a> sock_type, bool increment_port_on_retry)</td></tr>
<tr class="memdesc:a94aaee169c4c822e4c9e6a73f59a6952"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a TCP server that listens for socket connections.  <br /></td></tr>
<tr class="separator:a94aaee169c4c822e4c9e6a73f59a6952"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f3dfc2ccd62e181467f7a22ab5ebe49" id="r_a3f3dfc2ccd62e181467f7a22ab5ebe49"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3f3dfc2ccd62e181467f7a22ab5ebe49">accept_socket</a> (int socket, int rti_socket)</td></tr>
<tr class="separator:a3f3dfc2ccd62e181467f7a22ab5ebe49"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ac5b1b8bf1c832cbdd2f6cdbb769df8" id="r_a5ac5b1b8bf1c832cbdd2f6cdbb769df8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5ac5b1b8bf1c832cbdd2f6cdbb769df8">connect_to_socket</a> (int sock, const char *hostname, int port)</td></tr>
<tr class="separator:a5ac5b1b8bf1c832cbdd2f6cdbb769df8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8f7af0d4004aa925499fecefa1ac6b8" id="r_aa8f7af0d4004aa925499fecefa1ac6b8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa8f7af0d4004aa925499fecefa1ac6b8">read_from_socket</a> (int socket, size_t num_bytes, unsigned char *<a class="el" href="../../d5/df4/trace__util_8c.html#af00b615ca097c43dbb02ae3a00ea3a62">buffer</a>)</td></tr>
<tr class="separator:aa8f7af0d4004aa925499fecefa1ac6b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a941fd71700b7646e6edbbb76db4f7bd2" id="r_a941fd71700b7646e6edbbb76db4f7bd2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a941fd71700b7646e6edbbb76db4f7bd2">read_from_socket_close_on_error</a> (int *socket, size_t num_bytes, unsigned char *<a class="el" href="../../d5/df4/trace__util_8c.html#af00b615ca097c43dbb02ae3a00ea3a62">buffer</a>)</td></tr>
<tr class="separator:a941fd71700b7646e6edbbb76db4f7bd2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abcc3776e773dd4bf2a9112024b80706b" id="r_abcc3776e773dd4bf2a9112024b80706b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abcc3776e773dd4bf2a9112024b80706b">read_from_socket_fail_on_error</a> (int *socket, size_t num_bytes, unsigned char *<a class="el" href="../../d5/df4/trace__util_8c.html#af00b615ca097c43dbb02ae3a00ea3a62">buffer</a>, <a class="el" href="../../d3/d79/lf__arduino__support_8h.html#a7f67574f8818b6b888aa06156db05a7f">lf_mutex_t</a> *mutex, char *format,...)</td></tr>
<tr class="separator:abcc3776e773dd4bf2a9112024b80706b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4ba6b1361cd7c47e8a0eb70729d9636" id="r_ae4ba6b1361cd7c47e8a0eb70729d9636"><td class="memItemLeft" align="right" valign="top">ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae4ba6b1361cd7c47e8a0eb70729d9636">peek_from_socket</a> (int socket, unsigned char *result)</td></tr>
<tr class="separator:ae4ba6b1361cd7c47e8a0eb70729d9636"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8d4b83faeac37f665666429742813f9" id="r_ae8d4b83faeac37f665666429742813f9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae8d4b83faeac37f665666429742813f9">write_to_socket</a> (int socket, size_t num_bytes, unsigned char *<a class="el" href="../../d5/df4/trace__util_8c.html#af00b615ca097c43dbb02ae3a00ea3a62">buffer</a>)</td></tr>
<tr class="separator:ae8d4b83faeac37f665666429742813f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af88884c303b81143ef5ab7af4683a66c" id="r_af88884c303b81143ef5ab7af4683a66c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af88884c303b81143ef5ab7af4683a66c">write_to_socket_close_on_error</a> (int *socket, size_t num_bytes, unsigned char *<a class="el" href="../../d5/df4/trace__util_8c.html#af00b615ca097c43dbb02ae3a00ea3a62">buffer</a>)</td></tr>
<tr class="separator:af88884c303b81143ef5ab7af4683a66c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada8d9360bdf4e9d7f36bbfc7e682f06e" id="r_ada8d9360bdf4e9d7f36bbfc7e682f06e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ada8d9360bdf4e9d7f36bbfc7e682f06e">write_to_socket_fail_on_error</a> (int *socket, size_t num_bytes, unsigned char *<a class="el" href="../../d5/df4/trace__util_8c.html#af00b615ca097c43dbb02ae3a00ea3a62">buffer</a>, <a class="el" href="../../d3/d79/lf__arduino__support_8h.html#a7f67574f8818b6b888aa06156db05a7f">lf_mutex_t</a> *mutex, char *format,...)</td></tr>
<tr class="separator:ada8d9360bdf4e9d7f36bbfc7e682f06e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:adf691c9f60ed681da024d99b083c2705" id="r_adf691c9f60ed681da024d99b083c2705"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/d79/lf__arduino__support_8h.html#a7f67574f8818b6b888aa06156db05a7f">lf_mutex_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#adf691c9f60ed681da024d99b083c2705">socket_mutex</a></td></tr>
<tr class="separator:adf691c9f60ed681da024d99b083c2705"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="af58c457e08491f7cfd5a0a46940e11ad" name="af58c457e08491f7cfd5a0a46940e11ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af58c457e08491f7cfd5a0a46940e11ad">&#9670;&#160;</a></span>NUMBER_OF_FEDERATES</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NUMBER_OF_FEDERATES&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a065f1f00e4a82d34116e1cd8734fabde" name="a065f1f00e4a82d34116e1cd8734fabde"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a065f1f00e4a82d34116e1cd8734fabde">&#9670;&#160;</a></span>SOCKET_READ_RETRY_INTERVAL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SOCKET_READ_RETRY_INTERVAL&#160;&#160;&#160;1000000</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Number of nanoseconds to sleep before retrying a socket read. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a3f3dfc2ccd62e181467f7a22ab5ebe49" name="a3f3dfc2ccd62e181467f7a22ab5ebe49"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f3dfc2ccd62e181467f7a22ab5ebe49">&#9670;&#160;</a></span>accept_socket()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int accept_socket </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>socket</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>rti_socket</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Wait for an incoming connection request on the specified server socket. This blocks until a connection is successfully accepted. If an error occurs that is not temporary (e.g., <code>EAGAIN</code> or <code>EWOULDBLOCK</code>), it reports the error and exits. Temporary errors cause the function to retry accepting the connection.</p>
<p>If the <code>rti_socket</code> is not -1, this function checks whether the specified socket is still open. If it is not open, then this function returns -1. This is useful for federates to determine whether they are still connected to the federation and to stop waiting when they are not.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">socket</td><td>The server socket file descriptor that is listening for incoming connections. </td></tr>
    <tr><td class="paramname">rti_socket</td><td>The rti socket for the federate to check if it is still open. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The file descriptor for the newly accepted socket on success, or -1 on failure (with an appropriate error message printed). </dd></dl>

</div>
</div>
<a id="a5ac5b1b8bf1c832cbdd2f6cdbb769df8" name="a5ac5b1b8bf1c832cbdd2f6cdbb769df8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ac5b1b8bf1c832cbdd2f6cdbb769df8">&#9670;&#160;</a></span>connect_to_socket()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int connect_to_socket </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>sock</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>hostname</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>port</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Attempt to establish a TCP connection to the specified hostname and port. This function uses <code>getaddrinfo</code> to resolve the hostname and retries the connection periodically if it fails. If the specified port is 0, it iterates through a range of default ports starting from <code>DEFAULT_PORT</code>. The function will stop retrying if the <code>CONNECT_TIMEOUT</code> is reached.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sock</td><td>The socket file descriptor that has already been created (using <code>socket()</code>). </td></tr>
    <tr><td class="paramname">hostname</td><td>The hostname or IP address of the server to connect to. </td></tr>
    <tr><td class="paramname">port</td><td>The port number to connect to. If 0 is specified, a default port range will be used. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 on failure, and <code>errno</code> is set to indicate the specific error. </dd></dl>

</div>
</div>
<a id="a10b0373c1cff0213b17cb7308949f0a2" name="a10b0373c1cff0213b17cb7308949f0a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a10b0373c1cff0213b17cb7308949f0a2">&#9670;&#160;</a></span>create_real_time_tcp_socket_errexit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int create_real_time_tcp_socket_errexit </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create an IPv4 TCP socket with Nagle's algorithm disabled (TCP_NODELAY) and Delayed ACKs disabled (TCP_QUICKACK). Exits application on any error. </p>
<dl class="section return"><dt>Returns</dt><dd>The socket ID (a file descriptor). </dd></dl>

</div>
</div>
<a id="a94aaee169c4c822e4c9e6a73f59a6952" name="a94aaee169c4c822e4c9e6a73f59a6952"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a94aaee169c4c822e4c9e6a73f59a6952">&#9670;&#160;</a></span>create_server()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int create_server </td>
          <td>(</td>
          <td class="paramtype">uint16_t</td>          <td class="paramname"><span class="paramname"><em>port</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *</td>          <td class="paramname"><span class="paramname"><em>final_socket</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t *</td>          <td class="paramname"><span class="paramname"><em>final_port</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/dbd/socket__common_8h.html#a54c375e3893ff5969d20df65b90c8335">socket_type_t</a></td>          <td class="paramname"><span class="paramname"><em>sock_type</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>increment_port_on_retry</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a TCP server that listens for socket connections. </p>
<p>If the specified port number is greater than zero, this function will attempt to acquire that port. If the specified port number is zero, and the increment_port_on_retry is true, it will attempt to acquire DEFAULT_PORT. If it fails to acquire DEFAULT_PORT, then it will increment the port number from DEFAULT_PORT on each attempt until it has incremented MAX_NUM_PORT_ADDRESSES times, at which point it will cycle around and begin again with DEFAULT_PORT. If the port number is zero, and the increment_port_on_retry is false, it delegates to the operating system to provide an available port number. If acquiring the port fails, then this function will repeatedly attempt up to PORT_BIND_RETRY_LIMIT times with a delay of PORT_BIND_RETRY_INTERVAL in between each try.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">port</td><td>The port number to use or 0 to let the OS pick or 1 to start trying at DEFAULT_PORT. </td></tr>
    <tr><td class="paramname">final_socket</td><td>Pointer to the returned socket descriptor on which accepting connections will occur. </td></tr>
    <tr><td class="paramname">final_port</td><td>Pointer to the final port the server will use. </td></tr>
    <tr><td class="paramname">sock_type</td><td>Type of the socket, TCP or UDP. </td></tr>
    <tr><td class="paramname">increment_port_on_retry</td><td>Boolean to retry port increment. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 for success, -1 for failure. </dd></dl>

</div>
</div>
<a id="ae4ba6b1361cd7c47e8a0eb70729d9636" name="ae4ba6b1361cd7c47e8a0eb70729d9636"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae4ba6b1361cd7c47e8a0eb70729d9636">&#9670;&#160;</a></span>peek_from_socket()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ssize_t peek_from_socket </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>socket</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *</td>          <td class="paramname"><span class="paramname"><em>result</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Without blocking, peek at the specified socket and, if there is anything on the queue, put its first byte at the specified address and return 1. If there is nothing on the queue, return 0, and if an error occurs, return -1. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">socket</td><td>The socket ID. </td></tr>
    <tr><td class="paramname">result</td><td>Pointer to where to put the first byte available on the socket. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa8f7af0d4004aa925499fecefa1ac6b8" name="aa8f7af0d4004aa925499fecefa1ac6b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa8f7af0d4004aa925499fecefa1ac6b8">&#9670;&#160;</a></span>read_from_socket()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int read_from_socket </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>socket</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>num_bytes</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *</td>          <td class="paramname"><span class="paramname"><em>buffer</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Read the specified number of bytes from the specified socket into the specified buffer. If an error occurs during this reading, return -1 and set errno to indicate the cause of the error. If the read succeeds in reading the specified number of bytes, return 0. If an EOF occurs before reading the specified number of bytes, return 1. This function repeats the read attempt until the specified number of bytes have been read, an EOF is read, or an error occurs. Specifically, errors EAGAIN, EWOULDBLOCK, and EINTR are not considered errors and instead trigger another attempt. A delay between attempts is given by DELAY_BETWEEN_SOCKET_RETRIES. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">socket</td><td>The socket ID. </td></tr>
    <tr><td class="paramname">num_bytes</td><td>The number of bytes to read. </td></tr>
    <tr><td class="paramname">buffer</td><td>The buffer into which to put the bytes. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 for success, 1 for EOF, and -1 for an error. </dd></dl>

</div>
</div>
<a id="a941fd71700b7646e6edbbb76db4f7bd2" name="a941fd71700b7646e6edbbb76db4f7bd2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a941fd71700b7646e6edbbb76db4f7bd2">&#9670;&#160;</a></span>read_from_socket_close_on_error()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int read_from_socket_close_on_error </td>
          <td>(</td>
          <td class="paramtype">int *</td>          <td class="paramname"><span class="paramname"><em>socket</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>num_bytes</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *</td>          <td class="paramname"><span class="paramname"><em>buffer</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Read the specified number of bytes to the specified socket using read_from_socket and close the socket if an error occurs. If an error occurs, this will change the socket ID pointed to by the first argument to -1 and will return -1. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">socket</td><td>Pointer to the socket ID. </td></tr>
    <tr><td class="paramname">num_bytes</td><td>The number of bytes to write. </td></tr>
    <tr><td class="paramname">buffer</td><td>The buffer from which to get the bytes. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 for success, -1 for failure. </dd></dl>

</div>
</div>
<a id="abcc3776e773dd4bf2a9112024b80706b" name="abcc3776e773dd4bf2a9112024b80706b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abcc3776e773dd4bf2a9112024b80706b">&#9670;&#160;</a></span>read_from_socket_fail_on_error()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void read_from_socket_fail_on_error </td>
          <td>(</td>
          <td class="paramtype">int *</td>          <td class="paramname"><span class="paramname"><em>socket</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>num_bytes</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *</td>          <td class="paramname"><span class="paramname"><em>buffer</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d79/lf__arduino__support_8h.html#a7f67574f8818b6b888aa06156db05a7f">lf_mutex_t</a> *</td>          <td class="paramname"><span class="paramname"><em>mutex</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>format</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>...</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Read the specified number of bytes from the specified socket into the specified buffer. If a disconnect or an EOF occurs during this reading, then if format is non-null, report an error and exit. If the mutex argument is non-NULL, release the mutex before exiting. If format is null, then report the error, but do not exit. This function takes a formatted string and additional optional arguments similar to printf(format, ...) that is appended to the error messages. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">socket</td><td>The socket ID. </td></tr>
    <tr><td class="paramname">num_bytes</td><td>The number of bytes to read. </td></tr>
    <tr><td class="paramname">buffer</td><td>The buffer into which to put the bytes. </td></tr>
    <tr><td class="paramname">format</td><td>A printf-style format string, followed by arguments to fill the string, or NULL to not exit with an error message. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of bytes read, or 0 if an EOF is received, or a negative number for an error. </dd></dl>

</div>
</div>
<a id="ae8d4b83faeac37f665666429742813f9" name="ae8d4b83faeac37f665666429742813f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae8d4b83faeac37f665666429742813f9">&#9670;&#160;</a></span>write_to_socket()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int write_to_socket </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>socket</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>num_bytes</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *</td>          <td class="paramname"><span class="paramname"><em>buffer</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Write the specified number of bytes to the specified socket from the specified buffer. If an error occurs, return -1 and set errno to indicate the cause of the error. If the write succeeds, return 0. This function repeats the attempt until the specified number of bytes have been written or an error occurs. Specifically, errors EAGAIN, EWOULDBLOCK, and EINTR are not considered errors and instead trigger another attempt. A delay between attempts is given by DELAY_BETWEEN_SOCKET_RETRIES. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">socket</td><td>The socket ID. </td></tr>
    <tr><td class="paramname">num_bytes</td><td>The number of bytes to write. </td></tr>
    <tr><td class="paramname">buffer</td><td>The buffer from which to get the bytes. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 for success, -1 for failure. </dd></dl>

</div>
</div>
<a id="af88884c303b81143ef5ab7af4683a66c" name="af88884c303b81143ef5ab7af4683a66c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af88884c303b81143ef5ab7af4683a66c">&#9670;&#160;</a></span>write_to_socket_close_on_error()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int write_to_socket_close_on_error </td>
          <td>(</td>
          <td class="paramtype">int *</td>          <td class="paramname"><span class="paramname"><em>socket</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>num_bytes</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *</td>          <td class="paramname"><span class="paramname"><em>buffer</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Write the specified number of bytes to the specified socket using write_to_socket and close the socket if an error occurs. If an error occurs, this will change the socket ID pointed to by the first argument to -1 and will return -1. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">socket</td><td>Pointer to the socket ID. </td></tr>
    <tr><td class="paramname">num_bytes</td><td>The number of bytes to write. </td></tr>
    <tr><td class="paramname">buffer</td><td>The buffer from which to get the bytes. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 for success, -1 for failure. </dd></dl>

</div>
</div>
<a id="ada8d9360bdf4e9d7f36bbfc7e682f06e" name="ada8d9360bdf4e9d7f36bbfc7e682f06e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada8d9360bdf4e9d7f36bbfc7e682f06e">&#9670;&#160;</a></span>write_to_socket_fail_on_error()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void write_to_socket_fail_on_error </td>
          <td>(</td>
          <td class="paramtype">int *</td>          <td class="paramname"><span class="paramname"><em>socket</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>num_bytes</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *</td>          <td class="paramname"><span class="paramname"><em>buffer</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d79/lf__arduino__support_8h.html#a7f67574f8818b6b888aa06156db05a7f">lf_mutex_t</a> *</td>          <td class="paramname"><span class="paramname"><em>mutex</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>format</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>...</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Write the specified number of bytes to the specified socket using write_to_socket_close_on_error and exit with an error code if an error occurs. If the mutex argument is non-NULL, release the mutex before exiting. If the format argument is non-null, then use it an any additional arguments to form the error message using printf conventions. Otherwise, print a generic error message. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">socket</td><td>Pointer to the socket ID. </td></tr>
    <tr><td class="paramname">num_bytes</td><td>The number of bytes to write. </td></tr>
    <tr><td class="paramname">buffer</td><td>The buffer from which to get the bytes. </td></tr>
    <tr><td class="paramname">mutex</td><td>If non-NULL, the mutex to unlock before exiting. </td></tr>
    <tr><td class="paramname">format</td><td>A format string for error messages, followed by any number of fields that will be used to fill the format string as in printf, or NULL to print a generic error message. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="adf691c9f60ed681da024d99b083c2705" name="adf691c9f60ed681da024d99b083c2705"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf691c9f60ed681da024d99b083c2705">&#9670;&#160;</a></span>socket_mutex</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d79/lf__arduino__support_8h.html#a7f67574f8818b6b888aa06156db05a7f">lf_mutex_t</a> socket_mutex</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Mutex protecting socket close operations. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_4270bfced15e0e73154b13468c7c9ad9.html">core</a></li><li class="navelem"><a class="el" href="../../dir_da79f73d8cf16fc09c9e3a52dcc440a7.html">federated</a></li><li class="navelem"><a class="el" href="../../dir_f29cefe60e78d71d9f51507ecfc2b124.html">network</a></li><li class="navelem"><a class="el" href="../../d6/d63/socket__common_8c.html">socket_common.c</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
